# Camera Lock Demo (POC)

This is a Proof of Concept (POC) Android application that demonstrates a facility entry/exit flow where the device's camera is automatically locked upon entry and unlocked upon exit.

## Features

-   **Modern UI**: Clean and professional interface.
-   **QR Code Scanning**: Built-in scanner for Entry and Exit codes.
-   **Device Admin Lock**: Uses Android Device Administration API to disable the camera hardware.
-   **Backend Integration**: Connects to a Python backend for validation and state management.

## Backend Configuration

The app is configured to connect to a local backend server.

1.  Ensure your backend is running on port **5000**.
2.  If running on an **Android Emulator**, the app uses `http://10.0.2.2:5000/api/` (which forwards to localhost).
3.  If running on a **Physical Device**, update `Constants.kt` with your computer's local IP address (e.g., `http://192.168.1.100:5000/api/`).

## How to Test

You need to scan specific QR codes that contain valid JWT tokens generated by your backend.

### 1. Entry (Lock Camera)
Scan the **Entry QR Code** containing the token below:

```text
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJxckNvZGVJZCI6ImIxMzZkMmM0LWZlMjYtNDMyZS1hMzkxLWM3MmZkZWJhYWM4MiIsImFjdGlvbiI6ImxvY2siLCJmYWNpbGl0eUlkIjoiNjk3ODkxN2Y1OGE4ZTM2NTRhYjNlNDRmIiwibG9jYXRpb24iOiJNYWluIEVudHJhbmNlIiwidHlwZSI6InFyX3Rva2VuIiwiY3JlYXRlZEF0IjoiMjAyNi0wMS0yN1QxMDoyMDo0Ny4zMzRaIiwidGltZXN0YW1wIjoxNzY5NTA5MjQ3MzM0LCJpYXQiOjE3Njk1MDkyNDcsImV4cCI6MTc2OTUwOTI0N30.mwYuNttC-4bsa4en_sBK5AUAg05OGZcUOJQA3Uj5eYM
```

**Expected Behavior:**
1.  App sends the token + Device ID to `POST /enrollments/scan-entry`.
2.  Server validates and returns success.
3.  App requests **Device Admin** permission.
4.  App locks the camera.
5.  Status changes to **LOCKED** (Red).

### 2. Exit (Unlock Camera)
Scan the **Exit QR Code** containing the token below:

```text
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJxckNvZGVJZCI6IjA3MjRmYmJmLWM1ODctNDI3NS05MGMxLTVkYWU1YjM1ODhkMCIsImFjdGlvbiI6InVubG9jayIsImZhY2lsaXR5SWQiOiI2OTc4OTE3ZjU4YThlMzY1NGFiM2U0NGYiLCJsb2NhdGlvbiI6Ik1haW4gRXhpdCIsInR5cGUiOiJxcl90b2tlbiIsImNyZWF0ZWRBdCI6IjIwMjYtMDEtMjdUMTA6MjA6NDcuMzg4WiIsInRpbWVzdGFtcCI6MTc2OTUwOTI0NzM4OCwiaWF0IjoxNzY5NTA5MjQ3LCJleHAiOjE3NzIxMDEyNDd9.yPntQAPlA4-_6bH1goTHb7cJXPNz5hPxnp4Gu9IoWdA
```

**Expected Behavior:**
1.  App sends the token + Device ID to `POST /enrollments/scan-exit`.
2.  Server validates and returns success.
3.  App unlocks the camera.
4.  App removes **Device Admin** permission.
5.  Status changes to **UNLOCKED** (Green).

## Technical Note
This app targets `SdkVersion 28` (Android 9) to utilize the `setCameraDisabled` API, which is deprecated/restricted in newer Android versions for standard Device Admins. This is suitable for a specific enterprise/POC use case but might require "Profile Owner" implementation for production on modern Android 10+ devices.
